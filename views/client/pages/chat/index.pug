extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main
  .container.my-3
    include ../../partials/list-user.pug

    .row
      .col-12
        +box-head("Chat")
        if(nameRoom)
          div(
            class="text-center text-primary fw-bold" 
            style="font-size: 24px; font-weight: bold; color: #3E85FF ; margin-right: 200px"
          ) #{nameRoom.title}

    .row
      .col-md-9.col-12
        .chat(my_id = user.id )
          .inner-body
            each chat in chats 
              div(class=(chat.infoUser.id == user.id ? "inner-outgoing" : "inner-incoming"))
                if chat.infoUser.id != user.id
                  .inner-name #{chat.infoUser.fullName}
                if(chat.content)
                  .inner-content
                    | #{chat.content}
                if(chat.images)
                  .inner-images
                    each item in chat.images
                      img(src=item alt="image_chat")
            div(class="inner-list-typing")

          .inner-preview-images 
            div(class="custom-file-container" data-upload-id="upload-image")
              //- div(class="box-typing")
              //-   div(class="inner-name") Le Van A
              //-   div(class="inner-dots")
              //-     span
              //-     span
              //-     span
              //- div(class="box-typing")
              //-   div(class="inner-name") Le Van B
              //-   div(class="inner-dots")
              //-     span
              //-     span
              //-     span
          .inner-foot
            form(
              class="inner-form"
              action=""
            )
              input(
                type="text"
                placeholder="Nhập nội dung..."
                name="content"
              )
              label(
                for="file-upload-with-preview-upload-image"
                class="btn btn-light mx-2 mb-0"
                ) 
                <i class="fa-solid fa-image  text-primary"></i>
              span(class="emoji-button btn btn-light mx-2") 
                i( class="fa-regular fa-face-smile" class="text-primary")
              button
                i.fa-solid.fa-paper-plane
      if(nameRoom.users.length > 2)
        .col-md-3.col-12
                +box-head("Thành viên")
                .user-sidebar
                  ul.list-unstyled
                    each u in nameRoom.users
                      li.d-flex.align-items-center.mb-2
                        span #{u.infoUser.fullName}
  div(class="tooltip" role="tooltip")           
    emoji-picker(class="light")

  block script
    script(type = "module" src="/js/chat.js")
    script(type = "module" src="/js/users.js")